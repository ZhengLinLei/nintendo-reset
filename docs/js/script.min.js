/* CRC32 implementation in JavaScript
    Author: Zheng Lin Lei
    Date: 2022-12-26
    License: MIT
*/
class CRC32{#a=[];crc=4294967295;constructor(){this.generate()};crc32(t,e=this.crc){let r=t.length,s=0;for(;0!=r;){r-=1;let a;e=(e>>>8&16777215^this.#a[(e^t.charCodeAt(s))>>>0&255])>>>0,s+=1}return e};generate(){for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e=1&e?(e>>>1^3988292384)>>>0:e>>>1;this.#a.push(e)}}}class MasterKey{roll=5313;xor=43690;ex=1e5;alphabet="[0-9]+";constructor(t,e,r){this.crc32=new CRC32,this.serial_number=t;try{if(!parseInt(this.serial_number)||8!=this.serial_number.length||!this.serial_number.match(this.alphabet))throw"The serial number must be in the format of 8 digits"}catch(s){console.error(s);return}this.date_device=e+r;try{if(!parseInt(this.date_device)||4!=this.date_device.length||!this.date_device.match(this.alphabet))throw"The date must be in the format of MMDD"}catch(a){console.error(a);return}this.master_key=this.calculate()};getMasterKey(){return this.master_key};calculate(){return(((this.crc32.crc32(this.date_device+this.serial_number.slice(4,8))^this.xor)>>>0)+this.roll>>>0)%this.ex}}
// let str = new MasterKey("54033620", "12", "26")
// console.log(str.getMasterKey())